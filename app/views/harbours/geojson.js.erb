window.sharedPaths = {
  omi: "<%= image_path('omi.png').html_safe %>",
  omn: "<%= image_path('omn.svg').html_safe %>",
};

if (window.mapModule === undefined) {
  throw new Error("Map module was not defined");
}

mapModule.initializeIfUndefined(document.getElementById("map")); // STEP 1

mapModule.loadGeoJson(<%= @geojson.to_json.html_safe %>);
mapModule.setUnit("<%= j @unit %>");
mapModule.setFeaturesStyle(); // STEP 3
mapModule.loadSubfamilies('select2_subfamilies1', <%= @subfamilies1.to_json.html_safe %>, true); // STEP 4.1
mapModule.loadSubfamilies('select2_subfamilies2', <%= @subfamilies2.to_json.html_safe %>); // STEP 4.2
mapModule.loadSubfamilies('select2_subfamilies3', <%= @subfamilies3.to_json.html_safe %>); // STEP 4.3
